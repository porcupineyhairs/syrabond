<!DOCTYPE html>
<html>
<head>
<title>Syrabond API Client</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
<script src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.9.0.js"></script>
<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
<script src="http://ajax.aspnetcdn.com/ajax/knockout/knockout-2.2.1.js"></script>
</head>
<body>
    <div class="navbar">
        <div class="navbar-inner">
            <a class="brand" href="#">Syrabond API Client</a>
            
            <ul class="nav nav-tabs">
  <li><a href="main">Fast access view</a></li>
  <li><a href="premises">Premises</a></li>
  <li><a href="groups">Groups</a></li>
  <li class="active"><a href="maintenance">Maintenance</a></li>
</ul>
            
        </div>
    </div>
    <div id="main" class="container">

      	 
<table class="table table-striped">
    <tr><td><b>UID</b></td><td><b>Options</b></td></tr>
    <!-- ko foreach: statuses -->
    <tr>
    	<td><p><b data-bind="text: uid"></b></p></td>
        <td><span data-bind="text: ip() == 'offline' ? `OFFLINE ` : ip "></span><i data-bind="visible: ip() == 'offline'" class="icon-bell"></i></td>
    </tr>
    <!-- /ko -->
</table>

    </div>
    <script type="text/javascript">

        function StateView() {
         var self = this;
         self.apiuri = 'http://127.0.0.1:5001/api/statusall';
         self.statuses = ko.observableArray();
         
        $.getJSON(self.apiuri, function(data) {
            for (var i = 0; i < data.response.length; i++) {
                self.statuses.push({
                    uid: ko.observable(data.response[i].uid),
                    premise: ko.observable(data.response[i].premise),
                    ip: ko.observable(data.response[i].ip)
                });
            }
        });
         
         
         }
        ko.applyBindings(new StateView(), $('#main')[0]);

    </script>
</body>
</html>